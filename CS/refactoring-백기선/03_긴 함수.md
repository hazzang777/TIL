# ê¸´ í•¨ìˆ˜

ë°±ê¸°ì„ ë‹˜ì˜ `ì½”ë”©ìœ¼ë¡œ í•™ìŠµí•˜ëŠ” ë¦¬íŒ©í† ë§` ê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ë©°  
ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.  
ê¸€ ë°‘ì— ì°¸ì¡°ì— ê°•ì˜ ë§í¬ ìˆìŠµë‹ˆë‹¤.

ğŸ¤©Â *ì§§ì€ í•¨ìˆ˜ VS ê¸´ í•¨ìˆ˜*

- í•¨ìˆ˜ê°€ ê¸¸ìˆ˜ë¡ ì´í•´í•˜ê¸° ì–´ë µë‹¤ vs ì§§ì€ í•¨ìˆ˜ëŠ” ë” ë§ì€ ë¬¸ë§¥ ì „í™˜ì„ í•„ìš”
- `ê³¼ê±°ì—ëŠ”` ì‘ì€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ë” ë§ì€ ì„œë¸Œë£¨í‹´ í˜¸ì¶œë¡œ ì¸í•œ ì˜¤ë²„í—¤ë“œê°€ ìˆì—ˆìŒ
- ì‘ì€ í•¨ìˆ˜ì— `ì¢‹ì€ ì´ë¦„` ì„ ì‚¬ìš©í–ˆë‹¤ë©´ í•´ë‹¹ í•¨ìˆ˜ì˜ ì½”ë“œë¥¼ ë³´ì§€ ì•Šê³ ë„ ì´í•´í•  ìˆ˜ ìˆìŒ
- ì–´ë–¤ ì½”ë“œì— `ì£¼ì„` ì„ ë‚¨ê¸°ê³  ì‹¶ë‹¤ë©´, ì£¼ì„ ëŒ€ì‹  í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ `ì˜ë„` ë¥¼ í‘œí˜„í•´ë³´ì

ğŸ¤ Â *ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬íŒ©í† ë§ ê¸°ìˆ *

- `í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°` â†’ 99% ì´ê²ƒìœ¼ë¡œ í•´ê²° ê°€ëŠ¥
- í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•˜ë©´ì„œ í•´ë‹¹ í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•  ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§ˆ ë•Œ ë¦¬íŒ©í† ë§ ê³ ë ¤í•´ì•¼í•¨
    - `ì„ì‹œ ë³€ìˆ˜ë¥¼ ì§ˆì˜ í•¨ìˆ˜ë¡œ ë°”ê¾¸ê¸°`(Replace Temp with Query)
    - `ë§¤ê°œë³€ìˆ˜ ê°ì²´ ë§Œë“¤ê¸°` (Introduce Parameter Object)
    - `ê°ì²´ í†µì§¸ë¡œ ë„˜ê¸°ê¸°` (Preserve Whole Object)
- `ì¡°ê±´ë¬¸ ë¶„í•´í•˜ê¸°` â†’ ì¡°ê±´ë¬¸ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŒ
- ê°™ì€ ì¡°ê±´ìœ¼ë¡œ ì—¬ëŸ¬ê°œì˜ switchë¬¸ì´ ìˆë‹¤ë©´ `ì¡°ê±´ë¬¸ì„ ë‹¤í˜•ì„±ìœ¼ë¡œ ë°”ê¾¸ê¸°`
- ë°˜ë³µë¬¸ ì•ˆì—ì„œ ì—¬ëŸ¬ ì‘ì—…ì„ í•˜ê³  ìˆì–´ì„œ í•˜ë‚˜ì˜ ë©”ì†Œë“œë¡œ ì¶”ì¶œí•˜ê¸° ì–´ë µë‹¤ë©´ â†’ `ë°˜ë³µë¬¸ ìª¼ê°œê¸°`

## ì„ì‹œ ë³€ìˆ˜ë¥¼ ì§ˆì˜ í•¨ìˆ˜ë¡œ ë°”ê¾¸ê¸°

**Replace Temp with Query**

1. ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë°˜ë³µí•´ì„œ ë™ì¼í•œ ì‹ì„ ê³„ì‚°í•˜ëŠ” ê²ƒì„ í”¼í• ìˆ˜ ìˆìŒ ê·¸ë¦¬ê³  ì´ë¦„ì„ ì‚¬ìš©í•´ ì˜ë¯¸ë¥¼ í‘œí˜„ê°€ëŠ¥
2. ê¸´ í•¨ìˆ˜ë¥¼ ë¦¬íŒ©í† ë§í•  ë•Œ, ê·¸ëŸ¬í•œ ì„ì‹œ ë³€ìˆ˜ë¥¼ ì¶”ì¶œí•´ì„œ ë¶„ë¦¬í•œë‹¤ë©´ ë¹¼ë‚¸ í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•  ë§¤ê°œë³€ìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŒ

```java
String markdownForHomework = getMarkdownForParticipant(totalNumberOfEvents, p, rate);
```

ë¬¸ì œì 

- íŒŒë¼ë¯¸í„°ê°€ 3ê°œì´ë¯€ë¡œ ë§ì•„ë³´ì¸ë‹¤.

```java
private String getMarkdownForParticipant(int totalNumberOfEvents, Participant p) {
   return String.format("| %s %s | %.2f%% |\n", p.username(), checkMark(p, totalNumberOfEvents), getRate(totalNumberOfEvents, p));
}
```

- rate ê°’ì„ ì–»ëŠ” í•¨ìˆ˜ë¥¼ ì¶”ì¶œí•˜ì—¬ ê·¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ì—ì„œ í˜¸ì¶œí•´ì£¼ë©´ rate íŒŒë¼ë¯¸í„°ëŠ” ìì—°ìŠ¤ë ˆ ì œê±°í•  ìˆ˜ ìˆë‹¤.
- ì–´ë–¤ ê°’ì„ ê³„ì‚°í•˜ëŠ” ì½”ë“œë¥¼ í•¨ìˆ˜ë¡œ ì¶”ì¶œí–ˆì„ ë•Œ ì–»ì„ ìˆ˜ ìˆëŠ” ì¥ì ì´ë‹¤.

## ë§¤ê°œë³€ìˆ˜ ê°ì²´ ë§Œë“¤ê¸°

**Introduce Parameter Object**

ğŸ˜Â ê°™ì€ ë§¤ê°œë³€ìˆ˜ë“¤ì´ ì—¬ëŸ¬ ë©”ì†Œë“œì— ê±¸ì³ ë‚˜íƒ€ë‚œë‹¤ë©´ ê·¸ ë§¤ê°œë³€ìˆ˜ë“¤ì„ ë¬¶ì€ ìë£Œ     êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ

- í•´ë‹¹ ë°ì´í„°ê°„ì˜ ê´€ê³„ë¥¼ ë³´ë‹¤ ëª…ì‹œì ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŒ
- í•¨ìˆ˜ì— ì „ë‹¬í•  ë§¤ê°œë³€ìˆ˜ ê°œìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŒ
- ë„ë©”ì¸ì„ ì´í•´í•˜ëŠ”ë° ì¤‘ìš”í•œ ì—­í• ì„ í•˜ëŠ” í´ë˜ìŠ¤ë¡œ ë°œì „í•  ìˆ˜ ìˆìŒ

ê°€ì •) í˜„ì¬ í•´ë‹¹ ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°ë“¤ì´ ë‹¤ë¥¸ ê³³ì—ì„œë„ ìì£¼ ì‚¬ìš©ëœë‹¤ë©´?

```java
private double getRate(int totalNumberOfEvents, Participant p) {
        long count = p.homework().values().stream()
                .filter(v -> v == true)
                .count();
        double rate = count * 100 / totalNumberOfEvents;
        return rate;
}
```

â†’ í•´ë‹¹ íŒŒë¼ë¯¸í„°ë“¤ì˜ ë§¤ê°œë³€ìˆ˜ ê°ì²´ë¥¼ ë§Œë“¤ì

ì¸í…”ë¦¬ì œì´ì˜ refactor ê¸°ëŠ¥ì— ë³´ë©´

`Introduce Parameter Object` ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```java
private double getRate(ParticipantPrinter participantPrinter) {
        long count = participantPrinter.p().homework().values().stream()
                .filter(v -> v == true)
                .count();
        double rate = count * 100 / participantPrinter.totalNumberOfEvents();
        return rate;
}
```

## ê°ì²´ í†µì§¸ë¡œ ë„˜ê¸°ê¸°

**Preserve Whole Object**

- ì–´ë–¤ í•œ ê°ì²´ì—ì„œ êµ¬í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê°’ë“¤ì„ í•¨ìˆ˜ì— ì „ë‹¬í•˜ëŠ” ê²½ìš° â†’ í•´ë‹¹ ê°ì²´ë¡œ êµì²´ ê°€ëŠ¥
- ë§¤ê°œë³€ìˆ˜ ëª©ë¡ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ
- ì´ ê¸°ìˆ ì„ ì ìš©í•˜ê¸° ì „ì— ì˜ì¡´ì„±ì„ ê³ ë ¤í•´ì•¼ í•¨
    - ì´ ë©”ì†Œë“œê°€ í•´ë‹¹í•˜ëŠ” ê°ì²´ì— ì˜ì¡´í•´ë„ ë˜ëŠ”ê°€?
    - ë‹¤ë¥¸ ê°ì²´ì˜ íƒ€ì…ë„ ì´ ë©”ì„œë“œë¡œ ë¹„ìŠ·í•œ ì¼ì„ í•  ê²ƒì¸ê°€?
- ì–´ì©Œë©´ í•´ë‹¹ ë©”ì†Œë“œì˜ ìœ„ì¹˜ê°€ ì ì ˆí•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŒ
    - ê¸°ëŠ¥ í¸ì— `Feature Envy` ëƒ„ìƒˆì— í•´ë‹¹

```java
String markdownForHomework = getMarkdownForParticipant(p.username(), p.homework());
```

- í˜„ì¬ ë©”ì†Œë“œì˜ íŒŒë¼ë¯¸í„°ëŠ” `Participant` ì—ì„œ êµ¬í•  ìˆ˜ ìˆëŠ” ê°’ë“¤ì´ë‹¤.
    - ì´ëŸ¬í•œ ê²½ìš° `Participant` ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì¤€ë‹¤.

```java
private String getMarkdownForParticipant(Participant participant) {
        return String.format("| %s %s | %.2f%% |\n", participant.username(),
                checkMark(participant, this.totalNumberOfEvents),
                getRate(participant));
    }
```

ê³ ë¯¼í•´ì•¼í•  ì 

- ê°ê°ì˜ í•¨ìˆ˜ê°€ í•´ë‹¹ ê°ì²´ì— ì˜ì¡´í•˜ëŠ”ê²Œ ë§ëŠ”ê°€?
- í˜¹ì‹œ ì´ í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ê³³ì— ì ìš©ì„ í• ìˆ˜ë„ ìˆì§€ ì•ŠëŠ”ê°€?

â†’ ì´ëŸ¬í•œ ê²ƒë“¤ì„ ê³ ë¯¼í•´ì„œ ì ìš©í• ì§€ ì•ˆí• ì§€ ìƒê°ì„ í•´ì•¼í•œë‹¤.

- ê·¸ë¦¬ê³  ê³¼ì—° í•´ë‹¹ ë©”ì†Œë“œê°€ ì´ ìœ„ì¹˜ì— ìˆëŠ”ê²Œ ì ì ˆí•œê²ƒì¸ê°€?
    - í›„ì†ìœ¼ë¡œ `move method` ë¥¼ ê³ ë ¤í•´ë³¼ë§Œ í•˜ë‹¤.

##

Reference:   
[ì½”ë”©ìœ¼ë¡œ í•™ìŠµí•˜ëŠ” ë¦¬íŒ©í† ë§](https://www.inflearn.com/course/%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/dashboard)