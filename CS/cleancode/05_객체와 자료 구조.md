# 객체와 자료 구조

### 자료 추상화

자료를 세세하게 공개하기보다는 추상적인 개념으로 표현하는 편이 좋다.

인터페이스나 조회/설정 함수만으로는 추상화가 이뤄지지 않는다.

### 자료/객체 비대칭

```
절차적인 코드는 기존 자료 구조를 변경하지 않으면서 새 함수를 추가하기 쉽다.
반면, 객체 지향 코드는 기존 함수를 변경하지 않으면서 새 클래스를 추가하기 쉽다.

절차적인 코드는 새로운 자료 구조를 추가하기 어렵다. 그러려면 모든 함수를 고쳐야 한다.
객체 지향 코드는 새로운 함수를 추가하기 어렵다. 그러려면 모든 클래스를 고쳐야 한다.
```

복잡한 시스템을 짜다보면 새로운 함수가 아니라 새로운 자료 타입이 필요한 경우가 생긴다.

→ 이때는 클래스와 객체 지향 기법이 가장 적합

`반면` , 새로운 자료 타입이 아니라 새로운 함수가 필요한 경우도 생긴다. 이때는 절차적인 코드와 자료 구조가 좀 더 적합하다.

### 디미터 법칙

모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다는 법칙이다.

<aside>
💡 객체는 자료를 숨기고 함수를 공개한다. 즉, 객체는 조회 함수로 내부 구조를 공개하면 안 된다는 의미다.

</aside>

***디미터 법칙***

`클래스 C의 메서드 f는 다음과 같은 객체의 메서드만 호출해야 한다` 라고 주장

1. 클래스 C
2. f가 생성한 객체
3. f 인수로 넘어온 객체
4. C 인스턴스 변수에 저장된 객체

`하지만` 위 객체에서 허용된 메서드가 반환하는 객체의 메서드는 호출하면 안된다.

→ `기차 충돌`

```java
final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();
```

흔히 위와 같은 코드를 기차 충돌이라고 부른다.

여러 객체가 한 줄로 이어진 기차처럼 보이기 때문이다. → 이러한 방식은 피하는 것이 좋다.

### 자료 전달 객체

DTO : 자료 구조체의 전형적인 형태 공개 변수만 있고 함수가 없는 클래스 때로는 자료 전달 객체라고 부른다.

BEAN : 빈은 비공개 변수를 조회/설정 함수로 조작된다.

### 결론

객체는 동작을 공개하고 자료를 숨긴다.

그래서 기존 동작을 변경하지 않으면서 새 객체 타입을 추가하기는 쉬운 반면, 기존 객체에 새 동작을 추가하기는 어렵다.

자료 구조는 별다른 동작 없이 자료를 노출한다. 그래서 기존 자료 구조에 새 동작을 추가하기는 쉬우나, 기존 함수에 새 자료 구조를 추가하기는 어렵다.

---

### 자료 구조 VS 객체

***자료 구조***

1. 데이터 그 자체
2. 자료를 공개
3. 변수 사이에 조회 함수와 설정 함수로 변수를 다룬다고 객체가 되지 않는다.

***객체***

1. 비즈니스 로직과 관련
2. 자료를 숨기고, 추상화 한다. 
3. 자료를 다루는 함수만 공개한다.
4. 추상 인터페이스를 제공해 사용자가 구현을 모른 채 자료의 핵심을 조작할 수 있다.

### DTO = 자료 구조

1. 로직 없이 필드만 갖는다.
2. 일반적으로 클래스명이 Dto (or DTO)로 끝난다.
3. getter/setter를 갖기도 한다.

### Beans

Java Beans: 데이터 표현이 목적인 자바 객체

1. 멤버 변수는 private 속성이다.
2. getter와 setter를 가진다.

```java
public class PersonDTO {
	private String name;

	public PersonDTO(String name) {
		this.name = name;
	}

	public String getName(){
		return this.name;
	}

	public void setName(String name){
		this.name = name;
	}
}
```

### Active Record

***Database row를 객체에 맵핑하는 패턴***

- 비즈니스 로직 메서드를 추가해 객체로 취급하는 건 바람직하지 않다.
- 비즈니스 로직을 담으면서 내부 자료를 숨기는 객체는 따로 생성한다.
- `하지만` 객체가 많아지면 복잡하고, 가까운 곳에 관련 로직이 있는 것이 좋으므로 현업에서는 Entity에 간단한 메서드를 추가해 사용한다.

- 객체가 row를 담을 뿐 아니라 database에 대한 접근을 포함한다.
- Person의 속성을 담을 뿐 아니라, 생성 수정도 객체 안에서 수행할 수 있다.

→ 자바 개발을 하면서는 보기 힘든 패턴이다.

### Data Mapper 패턴

주로 사용하는 패턴

1. row를 담는 객체와 database에 접근할 수 있는 객체가 분리되어 있다.
2. Person은 값만 담고 있고, 생성, 수정 등 액션은 Mapper에서 담당한다.  

참조 : [클린코드](http://www.yes24.com/Product/Goods/11681152)