# 타입과 추상화

## INTRO

<aside>
💡 일단 컴퓨터를 조작하는 것이 추상화를 구축하고, 조작하고, 추론하는 것에 관한 모든 것이라고 깨닫고 나면 (휼륭한) 컴퓨터 프로그램을 작성하기 위한 중요한 전제 조건은 추상화를 정확하게 다루는 능력이라는 것이 명확해진다.
— 키스 데블린 —

</aside>

🥲  초기 지하철 노선도는 실제와 유사한 물리적인 지형 위에 구불구불한 운행 노선과 불규칙적인 역 간의 거리를

사실적으로 묘사하고 있었다.

→ 오히려 사실적인 정보가 지하철을 이용하는 승객에게 혼란을 야기했다.

즉, 지하철을 이용하는 승객의 목적은 `하나의 역에서 다른 역으로 이동하는 것` 

→ 승객이 원하는 것은

- 어떤 역에서 출발해야 하는지
- 어떤 역에서 환승해야 하는지

→ 직관적이고 단순하게 보여 주는 것이다.

![스팅모어.jpeg](%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%84%89%E1%85%A1%E1%86%BC%E1%84%92%E1%85%AA%203ebe793489414b949a23528fc4349e89/%E1%84%89%E1%85%B3%E1%84%90%E1%85%B5%E1%86%BC%E1%84%86%E1%85%A9%E1%84%8B%E1%85%A5.jpeg)

- 스팅모어가 디자인한 런던 지하철 지도
    - 상당히 사실적이며 지하철 승객의 목적에는 맞지 않다.

![다운로드.jpeg](%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%84%89%E1%85%A1%E1%86%BC%E1%84%92%E1%85%AA%203ebe793489414b949a23528fc4349e89/%E1%84%83%E1%85%A1%E1%84%8B%E1%85%AE%E1%86%AB%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3.jpeg)

- 해리 벡의 지하철 노선도
    - 지도가 당연히 가져야 한다는 정확성을 버리고 목적에 집중한 결과
    - 지하철 노선을 `추상화` 한것이다.
        - 승객이 `꼭 알아야하는 사실만 정확하게 표현`하고 `몰라도 되는 정보는 무시함`으로써 이해하기 쉽고 단순하며 목적에 부합하는 지하철 노선도 창조

## 추상화를 통한 복잡성 극복

- 해리 벡의 지하철 노선도는 불필요한 지형 정보를 제거함으로써 단순함을 달성한 추상화의 휼륭한 예
- 추상화의 목적은 불필요한 부분을 무시함으로써 현실에 존재하는 복잡성을 극복하는 것.

- 어떤 추상화도 의도된 목적이 아닌 다른 목적으로 사용된다면 오도될 수 있다.

<aside>
💡 추상화
어떤 양상, 세부 사항, 구조를 좀더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 `복잡도를 극복하는 방법`

1. 첫 번째 차원은 구체적인 사물들 간의 `공통점을 취하고 차이점을 버리는 일반화`를 통해 단순하게 만듬
2. 두 번째 차원은 `중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함`으로써 단순하게 만듬

</aside>

😎객체지향 패러다임을 이용해 좋은 애플리케이션을 개발하기 위해서는 `추상화의 두 차원을 이해하고 적용하는 것`

## 객체지향과 추상화

### 모두 트럼프일 뿐

```
상황)
우여곡절 끝에 엘리스는 아름다운 정원에 들어선다.
아름다운 정원에서는
하얀 장미를 붉게 칠하고 있는 세 명의 정원사
트럼프 처럼 생겼고 몸에는 스페이드 무늬가 그려졌다.

그때 하트 여왕 행렬이 들어선다.
세 명의 정원사는 땅바닥에 얼굴이 닿을 정도로 납작하게 업드린다.
행렬에 앞에서는 클로버를 든 열 명의 병사들이 행진해 들어왔다.
정원사들 처럼 몸이 납작하고 네모난 몸 모서리에 팔다리가 달려있다.

그 뒤로는 반짝거리는 다이아몬드를 치장한 신하들이 열을 지어 들어왔다.
열 명의 왕자와 공주들이 두명씩 손을 잡고 깡총거리며 뛰어다녔고
행렬의 마지막에는 하트 왕과 하트 여왕이 그 모습을 드러냈다.

그 속에는 하얀 토끼도 있었다.

엘리스는 여왕을 쳐다보며 마음속으로 이렇게 속삭였다.
'기껏해야 트럼프에 불과해'
```

`기껏해야 트럼프에 불과해`

- 앨리스는 토끼를 제와한 모든 객체를 `트럼프` 라는 하나의 개념으로 단순화
- 정원사들, 병사들, 왕자와 공주, 왕, 여왕의 차이점을 무시하고 공통점만을 취해 단순화

## 그룹으로 나누어 단순화하기

- 객체
    - 명확한 경계를 가지고 서로 구별할 수 있는 구체적인 사람이나 사물이다.

- 앨리스는 인물들을 하나씩 살펴보면서 자신이 알고있는 `트럼프` 의 의미에 적합한 인물은 트럼프 그룹에 포함
- 적합하지 않은 인물은 그룹에서 제외
    - 예) 하트 왕비는 `트럼프` 그룹에 속하지만 토끼는 그렇지 않음
    - 여러 등장인물들이 존재하지만 두 그룹으로 나누어 `트럼프` 와 `토끼` 라는 두 개의 렌즈를 통해 바라보는것은 복잡성을 효과적으로 감소시킴

## 개념

- why?
    - 객체지향 패러다임의 중심에는 구체적이고 실제적인 객체가 존재한다.
    - 하지만 개별적인 단위로 취급하기에는 인간이 지닌 인지능력은 턱없이 부족하다.
- how?
    - 사람들은 본능적으로 공통적인 특성을 기준으로 객체를 여러 그룹으로 묶어서 단순화하려고 노력한다.
    
- `개념`이란?
    - `공통점을 기반으로 객체들을 묶기위한 그릇`
    - In 이상한 나라의 앨리스
        - 앨리스는 이야기속에 등장하는 객체들 중에서 몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려 있는 객체를 트럼프라는 개념으로 추상화 했다.
        - 여기서 `트럼프` 는 같은 공통점을 가진 객체들을 포괄할 수 있는 개념이다.
    
- 개념을 사용한다면?
    - 객체를 여러 그룹으로 `분류(classification)`할 수 있다.
    - In 이상한 나라의 앨리스
        - 앨리스는 정원에 존재하는 객체를 `트럼프` 와 `토끼`  두개의 개념으로 나눔
        - 두 개념에 적합한 객체가 각 그룹에 포함되도록 분류했음
    
- 객체에 어떤 개념을 적용하는 것이 가능해서 개념 그룹의 일원이 될 때 객체를 그 개념의 인스턴스라고 한다.

<aside>
💡 객체란 특정한 개념을 적용할 수 있는 구체적인 사물을 의미
개념이 객체에 적용됐을 때 객체를 개념의 인스턴스라고 함

</aside>

## 개념의 세 가지 관점

- `심볼(symbol)`: 개념을 가리키는 간략한 이름이나 명칭
- `내연(intension)`: 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다.
- `외연(extension)`: 개념에 속하는 모든 객체의 집합

- In 이상한 나라의 앨리스
    - 심볼: 트럼프
    - 내연: 몸이 납작하고 두 손과 두 발은 네모 귀퉁이에 달려 있는 등장인물
    - 외연: 정원사, 병사, 왕자와 공주, 하트 왕과 하트 여왕 등등

→ 이러한 개념을 이용해 공통점을 가진 객체들을 분류할 수 있는 사실은 중요함

→ why?

- 객체지향 패러다임이 복잡성을 극복하는 데 사용하는 가장 기본적인 인지 수단이기 때문

## 객체를 분류하기 위한 틀

- 외연의 관점
    - 어떤 객체에 어떤 개념을 적용할 수 있다는 것은 동일한 개념으로 구성된 객체 집합에 해당 객체를 포함시킨다는 것을 의미

→ 따라서 분류란?

- 특정한 객체를 특정한 개념의 객체 집합에 포함시키거나 포함시키지 않는 작업을 의미

  

<aside>
💡 `분류`란 `객체에 특정한 개념을 적용하는 작업`이다. 객체에 특정한 개념을 적용하기로 결심했을 때 우리는 그 객체를 특정한 집합의 멤버로 분류하고 있는 것이다.

</aside>

- 장점
    - 객체를 적절한 개념에 따라 분류한 애플리케이션은 유지보수가 용이하고 변경에 유연하게 대처할 수 있다.

## 분류는 추상화를 위한 도구다.

- 첫번째 차원
    - 구체적인 사물 간의 공통점은 취하고 차이점은 버리는 일반화를 통한 단순화
- 두번째 차원
    - 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거해 단순화

<aside>
💡 개념을 통해 객체를 분류하는 과정은 추상화의 두 가지 차원을 모두 사용

</aside>

- In 이상한 나라의 앨리스
    - 정원사, 병사, 신하, 왕자와 공주 등 트럼프라는 개념으로 묶은 것은 공통점을 취한 결과
    - 공통점 중에서도 몸이 납작하고 두 손과 두 발이 모서리에 달려있다는 것 뿐
        - 그 외의 사항들은 불필요하기 때문에 전적으로 무시하고 있음

## 타입

### 타입은 개념이다.

→ 개념을 대체할 수 있는 좀 더 세련돼 보이는 용어

→ `공통점을 기반으로 객체들을 묶기 위한 틀`이다.

→ 타입의 속하는 객체 역시 타입의 인스턴스

<aside>
💡 타입은 개념과 동일하다. 따라서 타입이란 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념을 의미.
어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다.
타입의 인스턴스는 타입을 구성하는 외연인 객체 집합의 일원이 된다.

</aside>

## 데이터 타입

- why
    - 메모리에는 무수히 많은 데이터들은 0과1로 메모리에 저장됨.
    - 애플리케이션 안에서 타입이 없는 메모리 내부의 값을 다루다 보면 수많은 시행착오에 부딪히게 됨.
- how
    - 타입 없는 무질서에 질려버린 사람들은
        - 메모리 안의 데이터에 특정한 의미를 부여하기 시작함.
        - 연산을 한다면 → 숫자형
        - 문자로 구성되있거나 연결될 수 있다면 → 문자열형
        - 참/거짓을 이야기 할 수 있다면 → 논리형
- goal
    - 메모리 안의 모든 데이터가 비트열로 보임으로써 야기되는 혼란을 방지하는 것
    - 타입 시스템은 메모리 안에 저장된 0과 1에 대한 수행 가능한 작업과 불가능한 작업을 구분함으로써 데이터가 잘못 사용되는 것을 방지

- 타입과 관련된 중요한 2가지 사실
    - `타입은 데이터가 어떻게 사용되느냐에 관한 것`
    - `타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰진다`

<aside>
💡 데이터 타입은 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터이다.
데이터에 대한 분류는 암시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다.

</aside>

## 객체와 타입

- 데이터 타입에 대해 설명한 이유
    - 전통적인 데이터 타입에서 이야기 하는 타입과 객체지향의 타입 사이에 깊은 연관성이 있기 때문
- so
    - 객체를 타입에 따라 분류하고 그 타입에 이름을 붙이는 것은 프로그램에서 사용할 새로운 데이터 타입을 선언하는 것과 같다.
- point
    - 객체는 행위에 따라 변할 수 있는 상태를 가지고 있다는 사실을 기억하자.
    - 객체를 창조할 때 가장 중요하게 고려해야 하는 것은
        - 객체와 협력하기 위해 어떤 행동을 해야 할지를 결정하는 것

- point
    - 어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 객체가 수행하는 행동
        - 동일한 행동을 수행할 수 있다면 그 객체들은 동일한 타입으로 분류 될 수 있음
    - 객체의 내부적인 표현은 외부로부터 철저하게 감춰진다.

## 행동이 우선이다.

- 결과적으로 동일한 책임을 수행하는 일련의 객체는 동일한 타입에 속한다.
- 동일한 타입으로 분류하는 기준
    - 그 객체가 타입에 손한 다른 객체와 동일한 행동을 하기만 하면 된다.
- 결론
    - 객체의 타입을 결정하는 것은 객체의 행동 뿐이다.

- point
    - 같은 타입에 속한 객체는 행동만 동일하다면 서로 다른 데이터를 가질 수 있다.
    - 동일한 행동 == 동일한 책임
    - 동일한 책임 == 동일한 메시지 수신
        - 따라서 동일한 타입의 속하는 객체들은 내부의 데이터 표현 방식이 다르더라도 동일한 메시지를 수신하고 이를 처리할 수 있다.
        - 내부의 데이터 표현이 다르면 동일한 메시지를 처리하는 방식은 서로 다를 수 밖에 없다.
            - 이것은 `다형성`에 의미를 부여
                - 다형성이란?
                    - 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력이다.
        - 행동만이 고려대상이라는 사실은
            - 외부에 데이터를 감춰야 한다는 것을 의미한다.
                - 이것은 `캡슐화`라고 한다.
    - how
        - 객체가 외부에 제공해야 하는 책임을 먼저 설계
        - 그 책임을 수행하는 데 적합한 데이터를 결정
        - 데이터를 책임을 수행하는 데 필요한 외부 인터페이스 뒤로 캡슐화
        
          → 책임-주도 설계
        

## 타입의 계층

### 트럼프 계층

<aside>
💡 이야기에 등장하는 정원사, 병사, 하트 왕과 하트 여왕은 정말 트럼프인가?

</aside>

→ 앨리스는 그들을 정말 트럼프라고 생각한 적은 없다.

→ 단지 몇 가지 특징을 공유하기 때문에 트럼프라고 불렀을 뿐

- 정확하게 따지면 그들을 `트럼프 인간` 으로 봤던 것이다.

- why
    - 왜 저들은 트럼프가 아닌가?
    - 외양은 트럼프와 비슷하지 않은가?
- how
    - 객체는 동일한 타입으로 분류되기 위해서는 공통의 행동을 가져야함
    - 안타깝게도 등장인물들의 외양은 `트럼프` 와 유사하지만 행동 자체는 완벽하게는 동일하지 않다.

- 트럼프 타입
    - 납작 업드릴 수 있고 뒤집어 질수 있음
    - 그러나 트럼프 카드는 걸어 다닐수는 없다.
    - how
        - 트럼프 타입으로 불렸던 객체들은 `트럼프 인간` 이라는 타입으로 분류하는 것이 옳다.
        
- 트럼프 인간 타입의 객체는 트럼프 타입의 객체가 할 수 있는 모든 행동을 할 수 있을뿐만 아니라 추가적으로 걸어다니는 행동을 더 할 수 있음.

<aside>
💡 트럼프 인간은 트럼프 일종이지만 일반적인 트럼프 카드보다 좀 더 특화된 행동을 하는 트럼프인 것.

</aside>

![Untitled](%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%84%89%E1%85%A1%E1%86%BC%E1%84%92%E1%85%AA%203ebe793489414b949a23528fc4349e89/Untitled.png)

→ 트럼프 인간은 트럼프 보다 좀 더 특화된 행동을 하는 특수한 개념

→ 이 두 개념 사이의 관계를 `일반화/특수화` 관계

## 일반화/특수화 관계

- 타입과 타입 사이에는 `일반화/특수화` 관계가 존재할 수 있음
- 트럼프는 트럼프 인간보다 일반적인 개념
- 일반화와 특수화는 동시에 일어난다.
- point
    - 일반화/특수화 관계를 결정하는 것은 객체의 행동이다.
    - 두 타입 간에 일반화/특수화 관계가 성립하려면 한 타입이 다른 타입보다 더 특수하게 행동해야 하고
    - 반대로 한 타입은 다른 타입보다 더 일반적으로 행동해야 한다.

- 행동의 관점
    - 일반적인 타입이란 무엇이고 더 특수한 타입이란 무엇인가?
        - `일반적인 타입`이란
            - 특수한 타입이 가진 모든 행동들 중에서 `일부 행동만을 가지는 타입`을 가리킴
        - `특수한 타입`이란
            - 일반적인 타입이 가진 모든 타입을 포함하지만 거기에 더해 `자신만의 행동을 추가`하는 타입을 가리킴
- In 이상한 나라의 앨리스
    - 트럼프가 트럼프 인간의 일반화인 이유
        - 트럼프가 가진 모든 행동을 트럼프 인간이 공통적으로 수행가능하기 때문

- point
    - `특수한 타입은 일반 타입이 할 수 있는 모든 행동을 다 할 수 있어야함`
    - 주의해야 할점
        - `타입의 내연을 의미하는 행동의 가짓수와 외연을 의미하는 집합의 크기는 서로 반대`
    

## 슈퍼타입과 서브타입

- 일반적인 타입 → 슈퍼타입
- 특수한 타입 → 서브타입

→ 중요한 것은 슈퍼타입과 서브타입에서 두 타입의 관계는 행동에 의해 결정되는 것

→ `일반적으로 서브타입은 슈퍼타입의 행위와 호환되기 때문에 서브타입은 슈퍼타입을 대체할 수 있어야함`

<aside>
💡 어떤 타입을 다른 타입의 서브타입이라고 말할 수 있으려면 다른 타입을 대체할 수 있어야 한다.

</aside>

- 서브타입은 슈퍼타입의 행위에 추가적으로 특수한 자신만의 행동을 추가하는 것이므로 `슈퍼타입의 행동은 서브타입에서 자동으로 상속`된다.

## 일반화는 추상화를 위한 도구다

<aside>
💡 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거시켜 단순하게 만드는 것

</aside>

- In 이상한 나라의 앨리스
    - 앨리스가 `기껏해야 트럼프` 라고 말할때
        - 앨리스는 걸을 수 있는 트럼프 인간의 특수한 능력은 제거
        - 종이 조각처럼 쉽게 뒤집어지는 트럼프 특성에 집중한 것
    - 여기서 두 가지 추상화 기법이 함께 사용
        - 하나는 정원에 있던 등장인물들의 차이점을 배제하고 공통점만 강조해서 이들을 트럼프인간으로 분류
        - 다른 하나는 트럼프 인간을 좀더 단순화 해서 불필요한 특성을 배제하고 포괄적인 의미의 트럼프로 일반화
        

## 정적 모델

### 타입의 목적

- why
    - 왜 타입을 사용해야 할까?
    - 객체만 다루면 되지 않는가?
    - 타입을 사용하는 이유는
        - `동적으로 변하는 객체의 복잡성을 극복하기에는 인간의 인지능력으로는 어렵다`
- In 이상한 나라의 앨리스
    - 앨리스의 키는 어떤 음식을 먹을때마다 달라짐
    - 하지만 모든 경우에서 앨리스는 단지 앨리스일뿐
- point
    - 타입은 시간에 따라 동적으로 변하는 앨리스의 상태를 시간과 무관한 정적인 모습으로 다룰수 있게함

## 그래서 결국 타입은 추상화다.

- 이런 관점에서 타입은 추상화다.
    - why
        - 어떤 시점에 앨리스에 관해 생각할 때 불필요한 시간이라는 요소와 상태 변화라는 요소를 제거
        - 정적인 관점에서 앨리스의 모습을 묘사하는 것을 가능하게 함
    - final
        - 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화할 수 있는 효과적인 방법인 것

## 동적 모델과 정적 모델

- 동적 모델
    - 객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것
- 타입 모델
    - 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것
    - 정적 모델이라고도 한다.

- final
    - `프로그래밍 언어를 이용해 클래스를 작성하는 시점에는 정적인 관점에서 접근하는 것`
    - 그러나 `실제로 애플리케이션을 실행해 객체의 상태 변경을 추적하고 디버깅하는 동안에는 동적인 모델을 탐험하는 것`
    - `결국 동적인 관점과 정적인 관점 모두 다뤄야 한다는 사실!`

## 클래스

- 타입을 구현하는 가장 보편적인 방법은 클래스를 이용하는 것.
- 반면 클래스는 다른 타입을 구현할 수 있는 여러 구현 메커니즘 중 하나일 뿐
- final
    - 객체지향에서 중요한 것은 동적으로 변하는 객체의 `상태` 와 상태를 변경하는 `행위` 이다.
    - 클래스는 단지 메커니즘 중 하나이다.