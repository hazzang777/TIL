# 웹과 네트워크의 기본에 대해 알아보자

## 웹은 HTTP로 나타낸다.

웹 브라우저는 웹 브라우저 주소 입력란에 지정된 URL에 의지해서 웹 서버로부터 리소스라고 불리는 파일 등의 정보를 얻고 있는 것

서버에 의뢰를 하는 웹 브라우저 등을 `클라이언트` 

클라이언트에서 서버까지 일련의 흐름을 `HTTP` 라는 프로토콜이 결정짓는다.

프로토콜은 약속이다.

즉, 웹은 HTTP라는 약속을 사용한 통신으로 이루어져 있다.

## HTTP는 이렇게 태어났고 성장했다.

### 웹은 지식 공유를 위해 고안되었다

- 1989년 3월에 HTTP가 탄생
    - 멀리 떨어져 있는 동료 연구자와 지식을 공유할 수 있도록 시스템을 고안
    - 하이퍼텍스트: 여러 문서를 상호간에 관련 짓는 것
    - 상호간에 참조할 수 있는 WWW(World Wide Web) 기본 개념

WWW 웹 브라우저, 옛날에는 하이퍼텍스트를 열람 할 수 있는 클라이언트 애플리케이션의 명칭

현재는 WWW 혹은 단순히 웹이라 불리고 있다.

### 진보 안하는 HTTP

- HTTP/0.9
- HTTP/1.0
- HTTP/1.1
    - 1997년에 공개
    - 현재 가장 많이 사용되는 버전
    - 웹 문서 전송 프로토콜로서 등장한 HTTP는 거의 버전이 업그레이드 되지 않음

HTTP 등장 당시에는 주로 텍스트를 전송하기 위한 프로토콜이였지만,

프로토콜 자체가 상당히 심플해서 여러 가지 응용 방법을 고려해 → 기능이 계속 추가

`지금은 웹을 넘어서 다양하게 사용되는 프로토콜` 

## 네트워크의 기본은 TCP/IP

인터넷을 포함하여 일반적으로 사용하고 있는 네트워크는 TCP/IP라는 프로토콜에서 움직이고 있다.

HTTP는 그 중 하나!

### TCP/IP는 프로토콜의 집합

컴퓨터와 네트워크 기기가 상호간에 통신하기 위해서는 

→ `서로 같은 방법으로 통신해야 한다.` 

```
서로 다른 하드웨어, 다른 운영체제등을 가지고 서로 통신을 하기 위해서는
모든 요소에 규칙이 필요하게 된다.
```

프로토콜에는 여러가지가 있다.

1. 케이블 규격과 IP 주소 지정 방법
2. 떨어진 상대를 찾기 위한 방법
3. 그 곳에 도달하는 순서
4. 웹을 표시하기 위한 순서 ,,,,,등

→ 인터넷과 관련된 프로토콜을 모은 것을 TCP/IP 이다.

→ IP 프로토콜을 사용한 통신에서 사용되고 있는 프로토콜을 총칭해서 TCP/IP 라는 이름을 사용

### 계층으로 관리하는 TCP/IP

TCP/IP에서 중요한 개념 중 하나가 `계층` 

- 애플리케이션 계층
- 트랜스포트 계층
- 네트워크 계층
- 링크 계층

```
인터넷이 하나의 프로토콜로 되어 있다면 어디선가 사양이 변경되었을 때 전체를 바꿔야 하지만
계층화 되어 있으면 사양이 변경된 해당 계층만 바꾸면 된다.
```

→ 계층화하면 설계를 편하게 할 수 있다.

🤠 ***애플리케이션 계층***

유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임을 결정하고 있음

(FTP, DNS, HTTP,,,,)

🤠 ***트랜스포트 계층***

애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공

- TCP
- UDP

두 가지 프로토콜이 있음

🤠 ***네트워크 계층(혹은 인터넷 계층)***

네트워크 상에서 패킷의 이동을 다룬다.

패킷: 전송하는 데이터의 최소의 단위

`어떠한 경로를 거쳐` 상대의 컴퓨터까지 패킷을 보낼지를 결정한다.

🤠 ***링크 계층(혹은 데이터 링크 계층, 네트워크 인터페이스 계층)***

네트워크에 접속하는 하드웨어적인 면을 다룬다.

운영체제가 하드웨어를 제어하기 때문에

- 디바이스 드라이버
- 네트워크 인터페이스 카드

를 포함한다.

하드웨어적 측면은 모두 링크 계층의 역할입니다!

### TCP/IP 통신의 흐름

![KakaoTalk_Photo_2022-07-08-00-28-45](https://user-images.githubusercontent.com/68279162/177814173-46908360-9d30-4665-840d-f922987393e3.jpeg)

TCP/IP 통신을 할 때 계층을 순서대로 거쳐 상대와 통신을 한다.

애플리케이션 → 트랜스포트 → 네트워크 계층 → 링크 계층

![KakaoTalk_Photo_2022-07-08-00-28-40](https://user-images.githubusercontent.com/68279162/177814149-fa039ce3-9717-4bed-accd-8ec9355526de.jpeg)

```
예를 들어 설명 
송신측 클라이언트

1. 송신측 클라이언트에서 애플리케이션 계층에서 어느 웹 페이지를 보고싶다라는 HTTP 리퀘스트를 요청
2. 트랜스포트 계층에서는 애플리케이션 계층에서 받은 데이터를 통신하기 위해 쉽게 조각내어 안내 번호와
   포트 번호를 붙여 네트워크 계층에 전달
3. 수신지 MAC 주소를 추가해서 링크 계층에 전달

수신측 서버

1. 링크 계층에서 데이터를 받아들여 순서대로 위의 계층에 전달하여 애플리케이션 계층까지 도달
```

```
송신측
* 각 계층을 거칠 때는 반드시 헤더로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가한다.

수신측
* 각 계층을 거칠 때마다 반드시 해당 계층 마다 사용한 헤더를 삭제한다.
```

→ `이렇게 정보를 감싸는 것을 캡슐화` 

## HTTP와 관계가 깊은 프로토콜은 IP/TCP/DNS

### 배송을 담당하는 IP

IP는 계층은 `네트워크 계층` 

- 프로토콜의 명칭
- 개개의 패킷을 상대방에게 전달하는 것
- 상대방에게 전달하기 위해서는 여러가지 요소가 필요
    - IP 주소
        - 각 노드에 부여된 주소
    - MAC 주소
        - 각 네트워크 카드에 할당된 고유의 주소
        - 변경 불가
    

🤩 ***통신은 ARP를 이용하여 MAC 주소에서 한다.***

IP 통신은 MAC 주소에 의존해서 통신을 함

인터넷에서 통신을 할때 상대방이 같은 랜선 내에 있을 경우는 드물다

→ 대부분 여러 대의 컴퓨터와 네트워크 기기를 중계해서 상대방에게 도착한다.

→ 중계하는 동안에는 다음으로 중계할 곳의 MAC 주소를 사용하여 목적지를 찾아가는 것

- ARP(Address Resolution Protocol)이라는 프로토콜 사용
- 수신자의 IP 주소를 통하여 MAC 주소를 조사할 수 있음

☕️ ***그 누구도 인터넷 전체를 파악하고 있지는 않다.***

목적지까지 중계를 하는 도중에 컴퓨터와 라우터 등의 네트워크 기기는 대략적인 목적지만 알고 있다.

→ 이 시스템을 `라우팅` 이라고 부른다. (택배 배송과 흡사)

```
1. 화물을 보내는 사람은 택배 집배소등에 화물을 가지고 가면 택배를 보낼 수 있는 것만 알고있다.
2. 집배소는 화물을 보내는 곳을 보고 어느 지역의 집배소에 보내면 되는지만 알고있다.
3. 목적지에 있는 집배소는 어느 집에 배달하면 되는지만 알고 있다.
```

<aside>
💡 결국, 어떤 컴퓨터나 네트워크 기기도 인터넷 전체를 상세하게 파악하지 못한다.

</aside>

### 신뢰성을 담당하는 TCP

신뢰성 있는 `바이트 스트림 서비스`를 제공한다.

바이트 스트림 서비스란?

- 용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 분해하여 관리하는 것
- 신뢰성 있는 서비스는 상대방에게 보내는 서비스를 말함

😃 ***상대에게 데이터를 확실하게 보내는 것이 일이다***

여기서 TCP는 `쓰리웨이 핸드셰이킹` 방식을 사용

→ 보냈다고 끝나는게 아니다. 잘 보내졌는지 상대에게 확인하러 간다.

- `syn` , `ack` 라는 TCP 플래그를 사용한다.

***FLOW***

![KakaoTalk_Photo_2022-07-08-00-28-54](https://user-images.githubusercontent.com/68279162/177814183-922d1b57-4736-4543-96b4-e2a76f4981af.jpeg)

1. 먼저 출발지에서 SYN 로 상대에게 접속함과 동시에 + 패킷을 보낸다.
2. 도착지에서 SYN/ACK 로 도착지에 접속함과 동시에 패킷을 받았다는 사실을 전한다.
3. 마지막으로 출발지에서 ACK 플래그를 보내 패킷 교환이 완료되었음을 전한다.

 

<aside>
💡 통신중에 완전하게 안된다면 다시 같은 수순으로 TCP는 패킷을 재전송하게 된다.

</aside>

## 이름 해결을 담당하는 DNS

DNS: Domain Name System

- HTTP와 같은 응용 계층 시스템에서 도메인 이름과 IP 주소 이름 확인을 제공

컴퓨터는 www.naver.com과 같은 IP 주소와는 별도로 이름을 붙일 수 있다.

- 숫자로 나열하는 것보다 훨씬더 친숙하기 때문이고 편하다. (인간 관점)
- 그러나 컴퓨터는 숫자형식이 편하다.

→ 이러한 이유로 DNS가 나왔다.

- DNS는 도메인명에서 IP 주소를 조사하거나 반대로 IP 주소로 부터 도메인 명을 조사하는 서비스를 제공

![KakaoTalk_Photo_2022-07-08-00-28-58](https://user-images.githubusercontent.com/68279162/177814187-5bbd0fbf-eb56-405a-a8b4-bedcfac1a53c.jpeg)

(1) [www.naver.com](http://www.naver.com) 의 IP 주소를 알려달라고 요청

(2) [xxx.xxx.xxx](http://xxx.xxx.xxx).xx 라고 DNS 서버는 도메인명으로 보고 IP 주소를 파악하여 응답

(3) 송신측에서는 IP주소로 송신한다.

## 각각과 HTTP와의 관계

IP, TCP, DNS가 HTTP를 이용해서 통신을 할 때, 어떤 역할을 할까?

1. 먼저 송신측에서 DNS에 요청 → IP 주소 응답
2. HTTP: 수신측에 보낼 HTTP 메시지 작성
3. 송신측 TCP:  통신하기 쉽도록 패킷으로 분해, 패킷마다 일련번호 부여
4. IP: 상대가 어디있는지 찾아 중계해 가면서 배송
5. 수신측 TCP: 상대방으로부터 패킷을 받음 → 일련번호를 보고 조립
6. HTTP: 웹 서버에 대한 리퀘스트 내용을 처리

 

<aside>
💡 요청 처리 결과도 마찬가지로 TCP/IP 통신 순서대로 클라이언트에 반환

</aside>

## URI와 URL

URL: 웹 페이지를 표시하기 위해 입력하는 주소

- https://www.google.co.kr

### URI는 리소스 식별자

URI: Uniform Resource Identifier

***Uniform***

즉, 서식을 결정하는 것, 다양한 종류의 리소스 지정 방법을 같은 맥락에서 구별없이 취급할 수 있게 하는 것

또한, 새로운 스키마 도입을 용이하게 함 (예: http, ftp)

Resource

`식별 가능한 모든 것` 

파일, 이미지,,, 등등 구별할 수 있는 모든것은 리소스이다.

***Identifier***

식별 가능한 것을 참조하는 오브젝트 → 식별자라고 불린다.

결국, URI는 `스키마를 나타내는 리소스를 식별하기 위한 식별자`

URI와 URL을 동일하게 봐도 아무런 지장이 없다.

### URL 포맷

<aside>
💡 스키마 + 자격정보+서버주소+서버포트+계층적 파일 패스+쿼리문자열+프래그먼트 식별자

</aside>

- 스키마를 사용하여 리소스를 얻기 위해 사용하는 프로토콜을 지시
- 자격정보: 서버로 부터 리소스를 취득하려면 자격정보 필요 (옵션)
    - 유저명과 패스워드 지정 가능
- 서버 주소: DNS나 IP주소
- 서버 포트: 서버의 접속 대상이 되는 네트워크 포트 번호를 지정
    - 생략하면 디폴트 포트 번호
- 계층적 파일 패스
    - 서버 상의 파일 패스를 지정한다. (리소스 식별하기 위해서)
- 쿼리문자열: 리소스에 임의의 파라미터를 넘겨주기 위해 사용 (옵션)
- 프래그먼트 식별자: 주로 취득한 리소스에서 서브 리소스를 가리키기 위해 사용 (옵션)