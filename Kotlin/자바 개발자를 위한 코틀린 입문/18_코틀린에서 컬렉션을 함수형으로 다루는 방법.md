# ì½”í‹€ë¦°ì—ì„œ ì»¬ë ‰ì…˜ì„ í•¨ìˆ˜í˜•ìœ¼ë¡œ ë‹¤ë£¨ëŠ” ë°©ë²•

ì¸í”„ëŸ°ì—ì„œ `ìµœíƒœí˜„ ì§€ì‹ ê³µìœ ì`ë‹˜ì˜   
`ìë°” ê°œë°œìë¥¼ ìœ„í•œ ì½”í‹€ë¦° ì…ë¬¸`ì„ ìˆ˜ê°•í•˜ë©°  ì •ë¦¬í•œ ë‚´ìš© ì…ë‹ˆë‹¤.  
í•˜ë‹¨ì— ê°•ì˜ ë§í¬ ìˆìŠµë‹ˆë‹¤.

## í•„í„°ì™€ ë§µ

ì˜ˆ) ì‚¬ê³¼ë§Œ ì£¼ì„¸ìš” : filter

```kotlin
fun main() {
    val fruits = listOf(
        Fruit(1,"ì‚¬ê³¼", 3000, 2000),
        Fruit(2,"ì‚¬ê³¼", 4000, 3000),
        Fruit(3,"ë°”ë‚˜ë‚˜", 6000, 5000),
        Fruit(4,"ìˆ˜ë°•", 13000, 12000),
    )
    
    val apples = fruits.filter { fruit -> fruit.name == "ì‚¬ê³¼"}
		
		val applesIndex = fruits.filterIndexed{ idx, fruit -> // (1)
        println(idx)
        fruit.name == "ì‚¬ê³¼"
    }
}
```

(1) filterì—ì„œ ì¸ë±ìŠ¤ê°€ í•„ìš”í•˜ë‹¤ë©´ â†’ `filterIndexed` ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ì˜ˆ) ì‚¬ê³¼ì˜ ê°€ê²©ë“¤ì„ ì•Œê¸°: map

```kotlin
fun main() {
    val fruits = listOf(
        Fruit(1,"ì‚¬ê³¼", 3000, 2000),
        Fruit(2,"ì‚¬ê³¼", 4000, 3000),
        Fruit(3,"ë°”ë‚˜ë‚˜", 6000, 5000),
        Fruit(4,"ìˆ˜ë°•", 13000, 12000),
    )

    val applePrices = fruits
        .filter { fruit -> fruit.name == "ì‚¬ê³¼" }
        .map { fruit -> fruit.currentPrice }
    
}
```

â†’ ì¸ë±ìŠ¤ê°€ í•„ìš”í•˜ë‹¤ë©´: `mapIndexed` ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ì˜ˆ) Mapping ê²°ê³¼ê°€ nullì´ ì•„ë‹Œ ê²ƒë§Œ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´?

```kotlin
val bananaNotNull = fruits.filter { fruit -> fruit.name == "ë°”ë‚˜ë‚˜" }
        .mapNotNull { fruit -> fruit.nullOrValue() } 
```

â†’ filterì— null ì´ ì•„ë‹Œê²ƒë§Œ ë„˜ì–´ì˜¤ëŠ” ê²ƒì„ ì¶”ê°€í•˜ì§€ ì•Šê³  `mapNotNull` ì„ ì‚¬ìš©í•˜ë©´ nullì´ ì•„ë‹Œê²ƒë§Œ mapping í•  ìˆ˜ ìˆë‹¤.

## ë‹¤ì–‘í•œ ì»¬ë ‰ì…˜ ì²˜ë¦¬ ê¸°ëŠ¥

`all` : ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±í•˜ë©´ true ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ false

ì˜ˆ) ëª¨ë“  ê³¼ì¼ì´ ë°”ë‚˜ë‚˜ ì¸ê°€ìš”?

```kotlin
fun main() {
    val fruits = listOf(
        Fruit(1,"ì‚¬ê³¼", 3000, 2000),
        Fruit(2,"ì‚¬ê³¼", 4000, 3000),
        Fruit(3,"ë°”ë‚˜ë‚˜", 6000, 5000),
        Fruit(4,"ìˆ˜ë°•", 13000, 12000),
    )

    val targetName = "ë°”ë‚˜ë‚˜"
    val isAllBanana = fruits.all { fruit -> fruit.name == targetName }
    println(isAllBanana) // false
}
```

â†’ allê³¼ ë°˜ëŒ€ë¡œ `none` ë„ ìˆë‹¤. (ì¡°ê±´ì„ ëª¨ë‘ ë¶ˆë§Œì¡±í•˜ë©´ true ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ false)

â†’ `any` : ì¡°ê±´ì„ í•˜ë‚˜ë¼ë„ ë§Œì¡±í•˜ë©´ true, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ false

ì˜ˆ) count: ê°œìˆ˜ë¥¼ ì„¸ëŠ” ê²ƒ / ì‚¬ê³¼ì˜ ê°œìˆ˜ëŠ” ì´ ëª‡ê°œì¸ì§€?

```kotlin
fun main() {
    val fruits = listOf(
        Fruit(1,"ì‚¬ê³¼", 3000, 2000),
        Fruit(2,"ì‚¬ê³¼", 4000, 3000),
        Fruit(3,"ë°”ë‚˜ë‚˜", 6000, 5000),
        Fruit(4,"ìˆ˜ë°•", 13000, 12000),
    )

    val targetName = "ì‚¬ê³¼"
    val appleCount = fruits.count { fruit -> fruit.name == targetName }
    println(appleCount) // 2
}
```

ê·¸ ì™¸ì˜

- `sortedBy` : (ì˜¤ë¦„ì°¨ìˆœ) ì •ë ¬ / `sortedByDescending` : (ë‚´ë¦¼ì°¨ìˆœ) ì •ë ¬
- `distinctBy` : ë³€í˜•ëœ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ë³µ ì œê±°

ì˜ˆ) ì²«ë²ˆì§¸ ê³¼ì¼ë§Œ ì£¼ì„¸ìš”

- `first` : ì²«ë²ˆì§¸ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤. (ë¬´ì¡°ê±´ nullì´ ì•„ë‹ˆì–´ì•¼ í•œë‹¤.)
- `firstOrNull` : ì²« ë²ˆì§¸ ê°’ ë˜ëŠ” nullì¼ ê²½ìš° nullì„ ê°€ì ¸ì˜¨ë‹¤.

```kotlin
fun main() {
    val fruits = listOf(
        Fruit(1,"ì‚¬ê³¼", 3000, 2000),
        Fruit(2,"ì‚¬ê³¼", 4000, 3000),
        Fruit(3,"ë°”ë‚˜ë‚˜", 6000, 5000),
        Fruit(4,"ìˆ˜ë°•", 13000, 12000),
    )

    val fruit = fruits.first()
    println("id = ${fruit.id}") // id = 1 
}
```

ë°˜ëŒ€ë¡œ `last` , `lastOrNull` ë„ ìˆë‹¤.

## Listë¥¼ Mapìœ¼ë¡œ

ì˜ˆ) ê³¼ì¼ì´ë¦„ â†’ List<ê³¼ì¼> í˜•ì‹ì˜ (key, value) í˜•íƒœì¸ Mapì„ ë§Œë“¤ì–´ë³´ì

```kotlin
fun main() {
    val fruits = listOf(
        Fruit(1,"ì‚¬ê³¼", 3000, 2000),
        Fruit(2,"ì‚¬ê³¼", 4000, 3000),
        Fruit(3,"ë°”ë‚˜ë‚˜", 6000, 5000),
        Fruit(4,"ìˆ˜ë°•", 13000, 12000),
    )

    val fruitMap : Map<String, List<Fruit>> = fruits.groupBy { fruit -> fruit.name }
    println(fruitMap["ì‚¬ê³¼"])
}

/**
[Fruit(id=1, name=ì‚¬ê³¼, factoryPrice=3000, currentPrice=2000), Fruit(id=2, name=ì‚¬ê³¼, factoryPrice=4000, currentPrice=3000)]
*/
```

ì˜ˆ) idê°€ key , ê³¼ì¼ì´ value ì¸ Map

```kotlin
fruits.associateBy { fruit -> fruit.id }
```

â†’ groupByì™€ ë‹¬ë¦¬ `associateBy` ëŠ” valueì— ë‹¨ì¼ ê°ì²´ê°€ ë“¤ì–´ê°„ë‹¤.

ğŸ¤ Â **keyì™€ valueë¥¼ ë™ì‹œì— ì²˜ë¦¬ ê°€ëŠ¥í•˜ë‹¤.**

ì˜ˆ) (ê³¼ì¼ì´ë¦„ , List<ì¶œê³ ê°€>) ì¸ MAP

```kotlin
fruits.groupBy({fruit -> fruit.name}, {fruit -> fruit.factoryPrice})
```

ì˜ˆ)  id â†’ ì¶œê³ ê°€ Map

```kotlin
fruits.associateBy({fruit -> fruit.id}, {fruit -> fruit.factoryPrice})
```

<aside>
ğŸ’¡ í•¨ìˆ˜í˜• íŒŒë¼ë¯¸í„°ë¥¼ ë‘ ê°œ ë°›ëŠ” ê²½ìš°ì—ëŠ” ì†Œê´„í˜¸ ì•ˆì— ê°™ì´ ë„£ì–´ì£¼ëŠ”ê²Œ conventionì´ë‹¤.

</aside>

<aside>
ğŸ’¡ Mapë„ ìœ„ì— ê¸°ëŠ¥ë“¤ì„ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

</aside>

## ì¤‘ì²©ëœ ì»¬ë ‰ì…˜ ì²˜ë¦¬

ì˜ˆ) ì¶œê³ ê°€ì™€ í˜„ì¬ê°€ê°€ ë™ì¼í•œ ê³¼ì¼ë“¤ì„ ê³¨ë¼ì£¼ì„¸ìš”

```kotlin
fun main() {
    val fruits = listOf(
        listOf(
            Fruit(1,"ì‚¬ê³¼", 3000, 2000),
            Fruit(2,"ì‚¬ê³¼", 4000, 3000),
            Fruit(3,"ë°”ë‚˜ë‚˜", 6000, 5000),
            Fruit(4,"ìˆ˜ë°•", 13000, 12000)
        ),
        listOf(
            Fruit(5,"ì‚¬ê³¼", 3000, 2000),
            Fruit(6,"ì‚¬ê³¼", 4000, 3000),
            Fruit(7,"ë°”ë‚˜ë‚˜", 6000, 5000),
            Fruit(8,"ìˆ˜ë°•", 13000, 12000)
        )
    )
    
    fruits.flatMap {list ->  // (1)
        list.filter { fruit -> fruit.factoryPrice == fruit.currentPrice }
    }
}
```

(1) `flatMap`ì„ ì‚¬ìš©í•˜ë©´ List List â†’ ë‹¨ì¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë°”ë€Œê²Œ ëœë‹¤.

ëŒë‹¤ì•ˆì˜ ëŒë‹¤ê°€ ìˆê¸° ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì´ ë¦¬íŒ©í† ë§ ê°€ëŠ¥í•˜ë‹¤.

```kotlin
data class Fruit(
    val id: Long,
    val name: String,
    val factoryPrice: Long,
    val currentPrice: Long
){
    val isSamePrice : Boolean // ì¶”ê°€
        get() = factoryPrice == currentPrice
}
```

```kotlin
fun main() {
    val fruits = listOf(
        listOf(
            Fruit(1,"ì‚¬ê³¼", 3000, 2000),
            Fruit(2,"ì‚¬ê³¼", 4000, 3000),
            Fruit(3,"ë°”ë‚˜ë‚˜", 6000, 5000),
            Fruit(4,"ìˆ˜ë°•", 13000, 12000)
        ),
        listOf(
            Fruit(5,"ì‚¬ê³¼", 3000, 2000),
            Fruit(6,"ì‚¬ê³¼", 4000, 3000),
            Fruit(7,"ë°”ë‚˜ë‚˜", 6000, 5000),
            Fruit(8,"ìˆ˜ë°•", 13000, 12000)
        )
    )

    fruits.flatMap {list -> list.samePriceFilter} // í™•ì¥í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ í•˜ë‚˜ì˜ ëŒë‹¤ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ë³´ì´ê²Œ
}

val List<Fruit>.samePriceFilter: List<Fruit> // í™•ì¥í•¨ìˆ˜ë¥¼ ë§Œë“ ë‹¤.
    get() = this.filter(Fruit::isSamePrice)
```

- ì¤‘ì²©ëœ ì»¬ë ‰ì…˜ì€ í’€ë ¤ë©´ â†’ `flatten()` ì‚¬ìš©

Reference:  
[ìë°” ê°œë°œìë¥¼ ìœ„í•œ ì½”í‹€ë¦° ì…ë¬¸](https://www.inflearn.com/course/java-to-kotlin/dashboard)